#|
 This file is a part of legit
 (c) 2015 Shirakumo http://tymoon.eu (shinmera@tymoon.eu)
 Author: Nicolas Hafner <shinmera@tymoon.eu>
|#

(in-package #:org.shirakumo.legit)

(defun ensure-list (a)
  (if (listp a) a (list a)))

(defun shellify (arg)
  (when arg
    (etypecase arg
      (symbol (string-downcase arg))
      (string arg)
      (pathname (prin1-to-string (uiop:native-namestring arg)))
      (real (prin1-to-string arg))
      (list (format NIL "累蔺磲疸狎＇箬屐扉纟狎绌┅┅ㄤ彐鲠玳舡秕麴豸冤ㄤ彐鲠玳舡弪蝻蝮冤ㄤ彐鲠玳舡轭瘐舄紊泰ㄤ彐躅蝓é蝈篝沩溽蜱螬蹰镳候躅痱镧蜥箬屐扉纟沩溽蜱螬猴豸瘐玳舡秕麴豸哄蝌矧秕麴豸玳舡弪蝻蝮洪铕豸玳舡轭瘐舄┅ㄤ彐躅瘐蜷纟狎珞ㄡ蜱螬磲疸狎灬礅溽ㄡㄩ扉篝岍ㄦ轵篝岍岍狎珞┅ㄤ彐躅瓠簌礅簌礅镬ㄩ铘弪ㄦ矧磲紊岘孝簌礅镬┅ㄤ彐躅骝镱舡狎绛ㄡ蜱ㄡ钿扉篝狎绌ㄦ轭烘蝻铘狎绌┅ㄤ彐磲泸溴骈铄玳舡黩狃疱钺礤蝈篝狎玟彐螬灬礅溽骈滗戾瑚轸璀溴篝蝓泗躜邃灬礅溽扉篝ê蝈聃轵邃蝈猴痿轱钺镳弘妁脲狎玟彐戾舄è瘐蝈蝈瘐蜷纟狎珞蝈瘵瘐蝈脲瘐蜷纟狎珞脲┅瘐蝈镳瘐蜷纟狎珞镳舂ㄡ蹒脲磲疸狎灬礅溽ㄡ啜紊瓠簌礅岍┅ㄡ痧孱瘐蝈镳瘐蝈脲┅┅啜溴骢钺礤ì鲤躜弪羼脲泪蹒脲螬ㄤ邈灬蝈ㄩ珙矧徕戾括磲疸狎＇翳轵狨珉妁螬┅蝓㈢轸篚怏羼篝蜷铉滹黝汜箦钺礤穿括祜镳骘狎轭蝈麒孱ㄦ蝻铘狎绛狎绌泔祆邈疳蝮瀛蜥蜱溴狎绌括祜镳骘狎轭镳麒孱ㄦ蝻铘狎绛狎绌泔祆邈疳蝮瀛镝蜱溴狎绌括磲疸狎＇疳蝮瀛脶蜱溴脲括祜镳骘狎轭蝈躅戾篌ㄦ蝻铘狎绛狎绌泔祆邈疳蝮瀛蜥蜱溴狎绌括祜镳骘狎轭镳躅戾篌ㄦ蝻铘狎绛狎绌泔祆邈疳蝮瀛镝蜱溴狎绌┅┅┅ㄤ彐磲泸ワ痿镳糸镱蝈篝骘蝽螬啜戾è狎珞ㄡ篌镢镳糸镱镳糸镱螬┅麒孱狎珞梨矧眢┅ㄤ彐磲泸狎珏豉疱汜箦簌礅怙澌镳糸镱螬啜狃疱钿扉篝у豉疱汜箦簌礅括祜镳骘钺礤骘蝽螬轭镳糸镱泔祆邈啜ワ痿钺礤梨矧眢┅┅ㄤ彐磲泸溴骈铄狎琊狎箦ㄦ躅泐犴ㄤ彐狨祠簌礅镬痱彐轼钺礤镳糸镱螬怙澌怙澌戾è狎玟彐ㄧ孱簌⒘仪呐脾┅啜溴骢骢钽钺礤ì狎玟彐ㄤ弩趄蹉趱蜷铉忾钿ì簌礅镬镳糸镱螬ㄥ铙躜瀛扉篝狎玟彐ㄤ邈灬蝈ㄩ珙矧徕戾簌礅镬┅戾舄è镳糸镱磲疸狎＇孱篚蝈扉篝矧镳糸镱Ж溴驷蹯舂┅ì钺礤ㄩㄡ篌镢侯犴镳糸镱螬箦泔钿ㄡ篌镢侯犴镳糸镱螬簌礅镬┅ì钺礤ㄩㄡ篌镢乎疸狍镳糸镱螬篝蜷铉躔汜箦钺礤篝蜷铉滹黝汜箦钺礤┅ì痱彐轼ㄩ戾铉翳钺礤暴┅ㄤ邈灬蝈ㄩ珙矧徕戾痱彐轼钺礤镳糸镱螬棱镤┅┅ㄤ彐轭瀛狎琊狎箦疳蝮瀛蜥蜱溴ê蝈簌礅镬痱彐轼钺礤镳糸镱螬ㄡ蜱弭疱汜箦簌礅镬ê啜ㄔ扉篝簌礅镬┅┅ê礤礅弪祜镳骘翳轭轭ㄣ潋狎珞泔祆邈啜ㄥ耢翳轭绌ㄦ矧磲紊狺翳轭绌┅ê蝈啜ㄔ簌礅镬┅┅ㄤ彐轭瀛狎琊狎箦疳蝮瀛镝蜱溴ê镳簌礅镬痱彐轼钺礤镳糸镱螬啜麒孱瓠簌礅簌礅镬ㄡ蜱弭疱汜箦簌礅镬ê啜ㄔ扉篝簌礅镬┅┅ê礤礅弪祜镳骘翳轭轭ㄣ潋狎珞泔祆邈啜ㄥ耢翳轭绌翳轭绌┅ê镳啜ㄔ簌礅镬┅┅┅ㄤ彐轭瀛狎琊狎箦疳蝮瀛脶蜱溴ê骒徵簌礅镬痱彐轼钺礤镳糸镱螬啜麒孱瓠簌礅簌礅镬ㄡ蜱弭疱汜箦簌礅镬ê骒徵啜è羼冤ㄦ矧磲紊狺幄痱彐轼钺礤┅┅ê怙镬啜铛祆ㄦ矧磲紊铒幄钺礤┅┅ê礤礅弪祜镳骘翳轭轭ㄣ潋狎珞泔祆邈啜ㄥ耢翳轭绌ㄦ矧磲紊狺峤狺痱彐轼钺礤翳轭绌┅ê狎啜ㄔㄦ矧磲紊ㄦ矧磲紊狺螈痱彐轼钺礤箬屐扉纟簌礅镬┅┅ê狎缃啜ㄔㄦ矧磲紊ㄦ矧磲紊狺峤螈痱彐轼钺礤箬屐扉纟簌礅镬┅┅ê狎绠啜ㄔㄦ矧磲紊ㄦ矧磲紊狺狺幄痱彐轼钺礤箬屐扉纟簌礅镬┅┅ê磲啜扉篝祜镳骘脲鲠飑轭簌礅镬泔祆邈ㄦ矧磲紊ㄦ矧磲紊狺簋狺螈痱彐轼钺礤矧ㄦ轵篝镳糸镱螬⒔┅箬屐扉纟脲箬屐扉纟鲠飑┅┅ê骒徵躅戾篌矧ㄡ篌镢横蜱镳糸镱螬ㄡ篌镢横蜱镳糸镱螬ㄡ篌镢横蜱镳糸镱螬啜ㄔ┅┅ê怙镬躅戾篌矧ㄡ篌镢横蜱镳糸镱螬ㄡ篌镢横蜱镳糸镱螬ㄡ篌镢横蜱镳糸镱螬啜ㄔㄦ矧磲紊狺幄痱彐轼钺礤┅┅┅┅ㄤ彐珏铄蜷祜汜糸镱翳轭绌ê礤翳镤è疳翳钺礤疳翳钺礤┅疳翳钺礤ê礤翳镤è篝蜷铉篝蜷铉┅蹰镳吼狎箦钺糸鲥钺礤篝蜷铉篝蜷铉┅ㄤ彐磲泸鏖翳汨溟è铄鳝疳翳怙澌怙澌戾è镬ㄧ孱簌⑾棠┅铄ㄧ孱簌⑽抛┅啜戾è镬蹰镳虹弭泖洎ì铄祜汜糸镱铄鳝疳翳┅躅鏖钿痱雉邈痱镧ㄥ铙躜瀛溟蝈泗矧殄蟓屮轶铄鳗蹰镳恒桎轵铄鳗棱镤蹰镳恒桎轵镬洎┅┅ㄤ彐躅黹铋磲飙箬屐飙钺礤篝蜷铉疳翳钺礤蹰镳侯狒轹瀛钺礤篝蜷铉蹰镳哄铒蹒璀疳翳钺礤疳翳钺礤蹰镳虹弭泖洎┅ㄤ彐躅蝈灬糸鲥溟蝈灬糸鲥蝈篝篚怃轵螬祜镳骘篚轭篚怃轵骘溟礤蜱瀛疳翳钺礤蹰镳哄铙躜瀛溟蝈泗矧疳翳钺礤篚猢蹰镳哄铙躜瀛溟蝈泗矧疳翳钺礤蝈灬糸鲥┅翳孱礤蜱瀛疳翳钺礤蹰镳哄铙躜瀛溟蝈泗矧疳翳钺礤篚猢溟颟骈钺祆蝈趱蝾溟颟┅